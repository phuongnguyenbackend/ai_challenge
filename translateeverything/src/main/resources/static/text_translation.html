<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Text Translator</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <style>
        body {
          min-height: 100vh;
          background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 2rem;
          color: white;
        }
        .card {
          border-radius: 1rem;
          box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
          background-color: rgba(255, 255, 255, 0.05);
          color: white;
        }
        textarea,
        #translatedText {
          background-color: rgba(255, 255, 255, 0.1);
          color: white;
          border: none;
          resize: none;
        }
        textarea::placeholder {
          color: #ccc;
        }
        .btn-back {
          position: absolute;
          top: 20px;
          left: 20px;
        }
        .btn-translate {
          margin-top: 1rem;
        }
    </style>
</head>
<body>
    <a href="home.html" class="btn btn-outline-light btn-back">‚Üê Back</a>

    <div class="container">
        <div class="row g-4">
            <div class="col-12 col-lg-6">
                <div class="card p-3">
                    <h5 class="mb-2">Input</h5>
                    <textarea id="inputText" class="form-control" rows="6" placeholder="Enter text..."></textarea>
                    <button class="btn btn-outline-light btn-translate mt-3" id="translateBtn">Translate</button>
                </div>
            </div>
            <div class="col-12 col-lg-6">
                <div class="card p-3">
                    <h5 class="mb-2">Output</h5>
                    <div id="translatedText" class="form-control" style="height: 100%; min-height: 144px; overflow-y: auto;"></div>
                </div>
            </div>
        </div>
        <div class="mt-4">
            <p id="detectedLanguage" class="mb-2 fw-semibold">Detected Language: ...</p>
            <p id="grammarCorrection" class="fw-semibold">Grammar & Spelling Correction: ...</p>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.getElementById('translateBtn').addEventListener('click', async function () {
            const inputText = document.getElementById('inputText').value;
            const targetLang = "vi";

            const response = await fetch("http://localhost:8000/api/translate", {
                method: "POST",
                headers: {
                  "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    text: inputText,
                    src_lang: "",
                    tgt_lang: targetLang
                })
            });

            if (response.ok) {
                const result = await response.json();

                document.getElementById('detectedLanguage').textContent = "Detected Language: " + result.src_lang;
                document.getElementById('grammarCorrection').textContent = "Grammar & Spelling Correction: " + result.corrected;
                document.getElementById('translatedText').textContent = result.translated;
            } else {
                const error = await response.json();
                alert("Translation failed: " + error.detail);
            }
        });
    </script>
</body>
</html>